{
  "name": "My workflow 6 copy",
  "nodes": [
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "custom",
              "cronExpression": "0 6 * * *"
            }
          ]
        }
      },
      "name": "Cron4",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [
        -2680,
        19320
      ],
      "id": "552b5dab-f5ec-406a-866d-51fa3de6a57d"
    },
    {
      "parameters": {
        "fileName": "/tmp/input.mp4",
        "options": {}
      },
      "name": "Write Binary File2",
      "type": "n8n-nodes-base.writeBinaryFile",
      "typeVersion": 1,
      "position": [
        -1580,
        19320
      ],
      "id": "e84d4a7e-ac28-4989-a12b-fbb860d51608"
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"model\": \"gpt-4\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –∏ —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç Instagram Reels. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏—Ä—É—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∏ –≤—ã–∑—ã–≤–∞—é—Ç –∏–Ω—Ç–µ—Ä–µ—Å. –¢—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã, –∏ –∫–∞–∫ –ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞—é—Ç –¥–æ –∫–æ–Ω—Ü–∞.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"–°–æ–∑–¥–∞–π **–∑–∞–≥–æ–ª–æ–≤–æ–∫** –∏ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** –¥–ª—è Instagram Reels –Ω–∞ —Ç–µ–º—É: [–£–ö–ê–ñ–ò –¢–ï–ú–£ –ó–î–ï–°–¨].\\\\n\\\\nüîπ **–ó–∞–≥–æ–ª–æ–≤–æ–∫** ‚Äî –æ–¥–Ω–æ —Ü–µ–ø–ª—è—é—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–µ, –∫–ª–∏–∫–±–µ–π—Ç–Ω–æ–µ, –≤—ã–∑—ã–≤–∞—é—â–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å, –Ω–æ –±–µ–∑ —Ñ–µ–π–∫–∞. –ù–∏–∫–∞–∫–∏—Ö —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ.\\\\n\\\\nüîπ **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –º–∞–∫—Å–∏–º—É–º –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–¥–æ 2200).\\\\n‚Äî –ü–∏—à–∏ –∂–∏–≤—ã–º, —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–º —è–∑—ã–∫–æ–º.\\\\n‚Äî –†–∞–∑–±–µ–π –Ω–∞ –∞–±–∑–∞—Ü—ã.\\\\n‚Äî –ò—Å–ø–æ–ª—å–∑—É–π —Å–ø–∏—Å–∫–∏, –Ω—É–º–µ—Ä–∞—Ü–∏—é, –∫–æ—Ä–æ—Ç–∫–∏–µ –∏–Ω—Å–∞–π—Ç—ã, –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–π –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–º–æ–∂–Ω–æ –ö–ê–ü–°–û–ú).\\\\n‚Äî –î–æ–±–∞–≤—å –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é –≤ –∫–æ–Ω—Ü–µ.\\\\n\\\\n–í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:\\\\n\\\\n–ó–∞–≥–æ–ª–æ–≤–æ–∫: [—Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞]\\\\n–û–ø–∏—Å–∞–Ω–∏–µ: [–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]\"\n    }\n  ]\n}\n",
        "headerParametersJson": "{\n  \"Authorization\": \"Bearer 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\",\n  \"Content-Type\": \"application/json\"\n}\n"
      },
      "name": "GPT Generate2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -2480,
        19320
      ],
      "id": "ae733661-1984-412d-bdea-d2857b9c496f"
    },
    {
      "parameters": {
        "functionCode": "const files = items; // –∫–∞–∂–¥—ã–π item ‚Äî —ç—Ç–æ —Ñ–∞–π–ª\nif (!files.length) {\n  throw new Error('–ù–µ—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞');\n}\n\nconst idx = Math.floor(Math.random() * files.length);\n\nreturn [\n  {\n    json: {\n      fileId: files[idx].json.id,\n      fileName: files[idx].json.name\n    }\n  }\n];\n"
      },
      "name": "Pick Random2",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1940,
        19320
      ],
      "id": "14457556-33f5-449e-9cc3-0d1f45250823"
    },
    {
      "parameters": {
        "command": "==`ffmpeg -i \"/tmp/input.mp4\" -vf \"drawbox=0:0:iw:80:color=black@1.0:t=fill,drawbox=0:ih-80:iw:80:color=black@1.0:t=fill,drawtext=text='{{$node[\"Caption Source\"].json[\"title\"]}}':fontcolor=white:fontsize=36:x=(w-text_w)/2:y=20\" -y \"/tmp/output.mp4\"`\n"
      },
      "name": "Add Frame2",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -2680,
        19580
      ],
      "id": "35c63d48-ee07-48e2-a0ad-3d4518f5a456"
    },
    {
      "parameters": {
        "functionCode": "const content = items[0].json.choices?.[0]?.message?.content || '';\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π, –ø–æ—Å–ª–µ \"–ó–∞–≥–æ–ª–æ–≤–æ–∫:\")\nconst titleMatch = content.match(/–ó–∞–≥–æ–ª–æ–≤–æ–∫:\\s*[\"‚Äú]?(.+?)[\"‚Äù]?\\n/);\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ (–≤—Å—ë, —á—Ç–æ –ø–æ—Å–ª–µ \"–û–ø–∏—Å–∞–Ω–∏–µ:\")\nconst descriptionMatch = content.match(/–û–ø–∏—Å–∞–Ω–∏–µ:\\s*([\\s\\S]*)/);\n\n// –ß–∏—Å—Ç–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç\nconst title = titleMatch ? titleMatch[1].trim() : '';\nconst description = descriptionMatch ? descriptionMatch[1].trim() : '';\n\nreturn [\n  {\n    json: {\n      title,\n      description\n    }\n  }\n];\n"
      },
      "name": "Caption Source2",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2300,
        19320
      ],
      "id": "f04a9c91-83d7-4ae9-b28a-0d8c8c679013"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "list",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "additionalOptions": {}
      },
      "name": "Check Duplicate2",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -2240,
        19580
      ],
      "id": "5f32eae4-5dbe-4b68-8208-90a20916bf82",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "append",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "addAllFields": false,
        "options": {}
      },
      "name": "Save Record2",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -2000,
        19580
      ],
      "id": "b579b844-fbd0-4613-8b97-1b73a95ff539",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.autoposting.com/reels",
        "allowUnauthorizedCerts": true,
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"caption\": \"{{$node['Caption Source'].json['description']}}\",\n  \"file\": \"output.mp4\"\n}"
      },
      "name": "Publish Reel2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -1780,
        19580
      ],
      "id": "5138f4c1-bc64-4456-bb0f-57bd53decef6"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "update",
        "application": "airtable",
        "table": "history",
        "options": {}
      },
      "name": "Update Status2",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -1580,
        19580
      ],
      "id": "cf30db1d-e7bb-4cd2-8a39-3defe3c9f555",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "list",
        "useQueryString": true,
        "queryString": "'1mwCMPgw6NjfEl4IiRIb1gkdFCM42gBXi' in parents and mimeType != 'application/vnd.google-apps.folder'",
        "options": {}
      },
      "name": "Get Reels2",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        -2120,
        19320
      ],
      "id": "25ba1fcd-dc16-451a-b2a7-01a4fb506204",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{$node[\"Pick Random2\"].json[\"fileId\"]}}\n",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -1760,
        19320
      ],
      "id": "5303c723-2714-49a2-ac85-c4deb0ed347f",
      "name": "Download from Drive2",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "content": "# 1. n8n.io\n# 2. airtable.com\n# 3. developers.facebook.com\n# 4. platform.openai.com\n# 5. console.cloud.google.com\n.\n# ID -\n# Secret - \n# Access Token - EAAKp3yN0oqIBO72LfFPVfRgs6N4jWuO2Ph3GxtkBuo1O4PILEhnZBdgdRX1hxZA7ZBr9c2PQmeJkb7ZCKrkZBLgRkszNLWXTMZCzW2c52UuLXit6ZBQK2vXQ99C3H4tCNSuYAGYCpL4z1VrrgVcYtmVAfhPOF47YvZCZCkOgxmMQl9a0ivOzywiMFNKXWMX3azAQeWhxBFxYqtzcbZBQZBU7VrFhf2GJkUZBEZCp99dGrFEYjINsLLLJFxwZDZD",
        "height": 960,
        "width": 640
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1020,
        18500
      ],
      "typeVersion": 1,
      "id": "73ee934b-f112-47cb-9e1f-03935593e0ff",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "functionCode": "const binary = items[0].binary;\nitems[0].binary = {\n  data: binary['output'],\n};\nreturn items;"
      },
      "id": "5429b81d-c41f-468a-80c4-00f77b2e78e8",
      "name": "Move Binary (—Ä—É—á–Ω–∞—è)1",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -4880,
        1060
      ]
    },
    {
      "parameters": {
        "functionCode": "const binary = items[0].binary;\nitems[0].binary = {\n  data: binary['output'],\n};\nreturn items;"
      },
      "id": "821d66ce-ab0f-40a5-98b0-b52b30007c40",
      "name": "Move Binary (—Ä—É—á–Ω–∞—è)",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2480,
        19580
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "Cron4": {
      "main": [
        [
          {
            "node": "GPT Generate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Write Binary File2": {
      "main": [
        [
          {
            "node": "Add Frame2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT Generate2": {
      "main": [
        [
          {
            "node": "Caption Source2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pick Random2": {
      "main": [
        [
          {
            "node": "Download from Drive2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Frame2": {
      "main": [
        [
          {
            "node": "Move Binary (—Ä—É—á–Ω–∞—è)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Caption Source2": {
      "main": [
        [
          {
            "node": "Get Reels2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Duplicate2": {
      "main": [
        [
          {
            "node": "Save Record2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Record2": {
      "main": [
        [
          {
            "node": "Publish Reel2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Reels2": {
      "main": [
        [
          {
            "node": "Pick Random2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download from Drive2": {
      "main": [
        [
          {
            "node": "Write Binary File2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Move Binary (—Ä—É—á–Ω–∞—è)": {
      "main": [
        [
          {
            "node": "Check Duplicate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "bb1e7985-f442-4299-8e9c-e055bc239e3a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "03802800ec9728491c300edb92e0138d87d9dcbbfccb74620634ca050fae6138"
  },
  "id": "NnoYOzymkfuqYt8O",
  "tags": []
}
