{
  "name": "My workflow 6 copy",
  "nodes": [
    {
      "parameters": {
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "mode": "list",
          "value": "root",
          "cachedResultName": "/ (Root folder)"
        },
        "options": {}
      },
      "name": "Upload Final Video",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -500,
        -300
      ],
      "id": "5302d577-f236-4014-90ba-f01eead84d01",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "return [{json:{videoUrl:$node[\"Upload Final Video\"].json.webViewLink,description:$node[\"Caption Source1\"].json.description}}];"
      },
      "name": "Prepare Airtable Fields",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -300,
        -300
      ],
      "id": "83f08040-44ab-4b07-97b9-14fa367a47dc"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "list",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "additionalOptions": {}
      },
      "name": "Check Duplicate1",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -2180,
        340
      ],
      "id": "da6c57ad-fb80-4aee-a997-e29d420a51db",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "append",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "addAllFields": false,
        "options": {}
      },
      "name": "Save Record1",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -1940,
        340
      ],
      "id": "28e549ec-9b76-4bf2-bf99-db52ffe28d27",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.autoposting.com/reels",
        "allowUnauthorizedCerts": true,
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"caption\": \"{{$node['Caption Source'].json['description']}}\",\n  \"file\": \"output.mp4\"\n}"
      },
      "name": "Publish Reel1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -1740,
        340
      ],
      "id": "0e479ea6-aa98-4d9a-a3ab-bd88caa658d5"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "update",
        "application": "airtable",
        "table": "history",
        "options": {}
      },
      "name": "Update Status1",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -1520,
        340
      ],
      "id": "d6e6ff6a-57ce-4fc3-be98-5ce440db3ec7",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "# 1. n8n.io\n# 2. airtable.com\n# 3. developers.facebook.com\n# 4. platform.openai.com\n# 5. console.cloud.google.com\n.\n# ID -\n# Secret - \n# Access Token -",
        "height": 640,
        "width": 660
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1520,
        -1200
      ],
      "typeVersion": 1,
      "id": "c1e9b6f1-2c5b-40bd-a537-7193a87b5199",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "amount": 10,
        "unit": "seconds"
      },
      "name": "Wait Render1",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [
        -1160,
        -300
      ],
      "id": "8a90f6a5-1560-4cc2-8d4f-65a6de12f3a8",
      "webhookId": "25b2968f-29b8-47d4-8e3a-cb9a4c1a63de"
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"model\": \"gpt-3.5-turbo\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –∏ —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç Instagram Reels. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏—Ä—É—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–∑—É —Ü–µ–ø–ª—è—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∏ –¥–æ–Ω–æ—Å—è—Ç —Å—É—Ç—å.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"–°–æ–∑–¥–∞–π **–∑–∞–≥–æ–ª–æ–≤–æ–∫** –∏ **–∫—Ä–∞—Ç–∫–æ–µ, —Ü–µ–ø–ª—è—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** –¥–ª—è Instagram Reels –Ω–∞ —Ç–µ–º—É: [–£–ö–ê–ñ–ò –¢–ï–ú–£ –ó–î–ï–°–¨].\\n\\nüîπ **–ó–∞–≥–æ–ª–æ–≤–æ–∫** ‚Äî –æ–¥–Ω–æ —Ü–µ–ø–ª—è—é—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–µ, –∫–ª–∏–∫–±–µ–π—Ç–Ω–æ–µ, –≤—ã–∑—ã–≤–∞—é—â–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å, –Ω–æ –±–µ–∑ —Ñ–µ–π–∫–∞. –ù–∏–∫–∞–∫–∏—Ö —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ.\\n\\nüîπ **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî –ø–∏—à–∏ –∂–∏–≤—ã–º, —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–º —è–∑—ã–∫–æ–º. –ú–∞–∫—Å–∏–º—É–º 2‚Äì3 –∞–±–∑–∞—Ü–∞ –∏–ª–∏ 300 —Å–∏–º–≤–æ–ª–æ–≤. –ü–µ—Ä–µ–¥–∞–π —Å—É—Ç—å –≤–∏–¥–µ–æ, —É—Å–∏–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å, –¥–æ–±–∞–≤—å –ª—ë–≥–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä –∏–ª–∏ –≤–æ–ø—Ä–æ—Å. –ó–∞–≤–µ—Ä—à–∏ –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é (—Å–º–æ—Ç—Ä–∏, –ø–∏—à–∏, –¥–µ–ª–∞–π).\\n\\n–í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:\\n\\n–ó–∞–≥–æ–ª–æ–≤–æ–∫: [—Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞]\\n–û–ø–∏—Å–∞–Ω–∏–µ: [–∫—Ä–∞—Ç–∫–æ–µ, –≤–æ–≤–ª–µ–∫–∞—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]\"\n    }\n  ]\n}\n",
        "headerParametersJson": "{\n  \"Authorization\": \"Bearer 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\",\n  \"Content-Type\": \"application/json\"\n}\n"
      },
      "name": "GPT Generate",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -2320,
        -40
      ],
      "id": "226b1d09-57ed-4d51-b7b6-cef140d58ec5"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "75bcb72f-beba-47be-92e4-d334be1df56e",
              "name": "fileUrl",
              "value": "=https://drive.google.com/uc?export=download&id={{$node[\"Pick Random2\"].json[\"fileId\"]}}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1520,
        -40
      ],
      "id": "71773139-35dc-47f9-8c2b-c7b500d650ec",
      "name": "Edit Fields Video"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "75bcb72f-beba-47be-92e4-d334be1df56e",
              "name": "fileUrl",
              "value": "=https://drive.google.com/uc?export=download&id={{$node[\"Pick Random1\"].json[\"fileId\"]}}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1920,
        -300
      ],
      "id": "3c7e8dd9-3194-4ac8-b5d0-e2c98c508955",
      "name": "Edit Fields Audio"
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.json2video.com/v2/movies",
        "jsonParameters": true,
        "options": {
          "bodyContentType": "json"
        },
        "bodyParametersJson": "={{\nJSON.stringify({\n  resolution: \"custom\",\n  width: 1080,\n  height: 1920,\n  draft: true,\n  scenes: [\n    {\n      duration: 10,\n      elements: [\n        {\n          type: \"video\",\n          src: \"https://drive.google.com/uc?export=download&id=\" + $node[\"Pick Random2\"].json[\"fileId\"],\n          width: 1080,\n          height: 1200,\n          top: 360,\n          left: 0,\n          resize: \"cover\",\n          position: \"absolute\",\n          duration: 10,\n          \"z-index\": 1\n        },\n        {\n          type: \"html\",\n          html:\n            \"<div style='width:100%;height:240px;background:black;display:flex;align-items:center;justify-content:center;padding:0 40px;'>\" +\n            \"<span style='font-size:38px;font-weight:bold;color:white;text-align:center;'>\" +\n            $node[\"Caption Source\"].json[\"title\"] +\n            \"</span></div>\",\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          width: 1080,\n          height: 240,\n          duration: 10,\n          \"z-index\": 10\n        },\n        {\n          type: \"html\",\n          html: \"<div style='width:100%;height:240px;background:black;'></div>\",\n          position: \"absolute\",\n          bottom: 0,\n          left: 0,\n          width: 1080,\n          height: 240,\n          duration: 10,\n          \"z-index\": 5\n        },\n        {\n          type: \"audio\",\n          src: \"https://drive.google.com/uc?export=download&id=\" + $node[\"Pick Random1\"].json[\"fileId\"],\n          duration: 10\n        }\n      ]\n    }\n  ]\n})\n}}\n",
        "headerParametersJson": "{\n  \"Content-Type\": \"application/json\",\n  \"x-api-key\": \"5QWRvH54aWMKmfeHGqoj0cLpukGYFbuNeKdFsTve\"\n}"
      },
      "id": "b84af421-d663-470d-8de7-f8523c412c8d",
      "name": "Create Video via json2video",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [
        -1360,
        -300
      ]
    },
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "custom",
              "cronExpression": "0 6 * * *"
            }
          ]
        }
      },
      "name": "Cron",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [
        -2540,
        -240
      ],
      "id": "9b22aa50-8c32-4d81-8ea6-93ea1c7997cd"
    },
    {
      "parameters": {
        "functionCode": "const content = items[0].json.choices?.[0]?.message?.content || '';\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π, –ø–æ—Å–ª–µ \"–ó–∞–≥–æ–ª–æ–≤–æ–∫:\")\nconst titleMatch = content.match(/–ó–∞–≥–æ–ª–æ–≤–æ–∫:\\s*[\"‚Äú]?(.+?)[\"‚Äù]?\\n/);\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ (–≤—Å—ë, —á—Ç–æ –ø–æ—Å–ª–µ \"–û–ø–∏—Å–∞–Ω–∏–µ:\")\nconst descriptionMatch = content.match(/–û–ø–∏—Å–∞–Ω–∏–µ:\\s*([\\s\\S]*)/);\n\n// –ß–∏—Å—Ç–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç\nconst title = titleMatch ? titleMatch[1].trim() : '';\nconst description = descriptionMatch ? descriptionMatch[1].trim() : '';\n\nreturn [\n  {\n    json: {\n      title,\n      description\n    }\n  }\n];\n"
      },
      "name": "Caption Source",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2120,
        -40
      ],
      "id": "02a8176b-a666-40ab-a919-c9160692ebfe"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "list",
        "useQueryString": true,
        "queryString": "'1gZh69VtInNxR___u-VnNIUUihcmq_mCi' in parents and mimeType != 'application/vnd.google-apps.folder'",
        "options": {}
      },
      "name": "Audio Disc",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        -2320,
        -300
      ],
      "id": "a6242a3a-026a-460e-8a20-3eb1aef1e77d",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "list",
        "useQueryString": true,
        "queryString": "'1mwCMPgw6NjfEl4IiRIb1gkdFCM42gBXi' in parents and mimeType != 'application/vnd.google-apps.folder'",
        "options": {}
      },
      "name": "Video Disc",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        -1920,
        -40
      ],
      "id": "19f1afe4-3a29-4ca2-8a04-9a8116f5927a",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "const files = items; // –∫–∞–∂–¥—ã–π item ‚Äî —ç—Ç–æ —Ñ–∞–π–ª\nif (!files.length) {\n  throw new Error('–ù–µ—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞');\n}\n\nconst idx = Math.floor(Math.random() * files.length);\n\nreturn [\n  {\n    json: {\n      fileId: files[idx].json.id,\n      fileName: files[idx].json.name\n    }\n  }\n];\n"
      },
      "name": "Pick Random2",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1720,
        -40
      ],
      "id": "ccaeb9da-137a-431d-8190-a7ee1a100aba"
    },
    {
      "parameters": {
        "functionCode": "const files = items; // –∫–∞–∂–¥—ã–π item ‚Äî —ç—Ç–æ —Ñ–∞–π–ª\nif (!files.length) {\n  throw new Error('–ù–µ—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞');\n}\n\nconst idx = Math.floor(Math.random() * files.length);\n\nreturn [\n  {\n    json: {\n      fileId: files[idx].json.id,\n      fileName: files[idx].json.name\n    }\n  }\n];\n"
      },
      "name": "Pick Random1",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2120,
        -300
      ],
      "id": "82dea402-f387-4539-977a-0f93ef219295"
    },
    {
      "parameters": {
        "url": "https://api.json2video.com/v2/movies/{{$node[\"Create Video via json2video1\"].json[\"project\"]}}",
        "jsonParameters": true,
        "options": {},
        "headerParametersJson": "{\n  \"Authorization\": \"Bearer {{$env.JSON2VIDEO_API_KEY}}\"\n}"
      },
      "name": "Check Render Status",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -1000,
        -300
      ],
      "id": "9d2cd14d-ca1b-40a8-a752-867e424f4405"
    },
    {
      "parameters": {
        "url": "={{$node[\"Check Render Status\"].json[\"videoUrl\"]}}",
        "responseFormat": "file",
        "jsonParameters": true,
        "options": {}
      },
      "name": "Download Final Video",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -660,
        -360
      ],
      "id": "73581849-b01f-4207-9c3c-efc6970f9928"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$node[\"Check Render Status\"].json[\"videoUrl\"]}}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "name": "If Video Ready",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -840,
        -300
      ],
      "id": "3a075561-ee70-4e4a-b5cb-17d9a7962a87"
    }
  ],
  "pinData": {
    "Cron": [
      {
        "json": {}
      }
    ]
  },
  "connections": {
    "Upload Final Video": {
      "main": [
        [
          {
            "node": "Prepare Airtable Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Duplicate1": {
      "main": [
        [
          {
            "node": "Save Record1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Record1": {
      "main": [
        [
          {
            "node": "Publish Reel1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Publish Reel1": {
      "main": [
        [
          {
            "node": "Update Status1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait Render1": {
      "main": [
        [
          {
            "node": "Check Render Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT Generate": {
      "main": [
        [
          {
            "node": "Caption Source",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields Video": {
      "main": [
        [
          {
            "node": "Create Video via json2video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Video via json2video": {
      "main": [
        [
          {
            "node": "Wait Render1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cron": {
      "main": [
        [
          {
            "node": "GPT Generate",
            "type": "main",
            "index": 0
          },
          {
            "node": "Audio Disc",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Caption Source": {
      "main": [
        [
          {
            "node": "Video Disc",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Audio Disc": {
      "main": [
        [
          {
            "node": "Pick Random1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video Disc": {
      "main": [
        [
          {
            "node": "Pick Random2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pick Random2": {
      "main": [
        [
          {
            "node": "Edit Fields Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pick Random1": {
      "main": [
        [
          {
            "node": "Edit Fields Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Render Status": {
      "main": [
        [
          {
            "node": "If Video Ready",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Final Video": {
      "main": [
        [
          {
            "node": "Upload Final Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Video Ready": {
      "main": [
        [
          {
            "node": "Download Final Video",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait Render1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields Audio": {
      "main": [
        [
          {
            "node": "GPT Generate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "cbc7fb30-065b-46c5-b989-8eff656e6d6e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "03802800ec9728491c300edb92e0138d87d9dcbbfccb74620634ca050fae6138"
  },
  "id": "NnoYOzymkfuqYt8O",
  "tags": []
}
