{
  "name": "My workflow 6 copy",
  "nodes": [
    {
      "parameters": {
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "mode": "list",
          "value": "root",
          "cachedResultName": "/ (Root folder)"
        },
        "options": {}
      },
      "name": "Upload Final Video1",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -1280,
        -1680
      ],
      "id": "03ae0a0b-ab32-4325-8f3c-23422a44351f",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "return [{json:{videoUrl:$node[\"Upload Final Video\"].json.webViewLink,description:$node[\"Caption Source1\"].json.description}}];"
      },
      "name": "Prepare Airtable Fields1",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1080,
        -1680
      ],
      "id": "8a0da583-d124-4751-8cb7-633e43587bb5"
    },
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "custom",
              "cronExpression": "0 6 * * *"
            }
          ]
        }
      },
      "name": "Cron",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [
        -2060,
        -1920
      ],
      "id": "c85fffce-268d-43b6-b0b9-19f2ded6ec38"
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"model\": \"gpt-3.5-turbo\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –∏ —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç Instagram Reels. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏—Ä—É—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–∑—É —Ü–µ–ø–ª—è—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∏ –¥–æ–Ω–æ—Å—è—Ç —Å—É—Ç—å.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"–°–æ–∑–¥–∞–π **–∑–∞–≥–æ–ª–æ–≤–æ–∫** –∏ **–∫—Ä–∞—Ç–∫–æ–µ, —Ü–µ–ø–ª—è—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** –¥–ª—è Instagram Reels –Ω–∞ —Ç–µ–º—É: [–£–ö–ê–ñ–ò –¢–ï–ú–£ –ó–î–ï–°–¨].\\n\\nüîπ **–ó–∞–≥–æ–ª–æ–≤–æ–∫** ‚Äî –æ–¥–Ω–æ —Ü–µ–ø–ª—è—é—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–µ, –∫–ª–∏–∫–±–µ–π—Ç–Ω–æ–µ, –≤—ã–∑—ã–≤–∞—é—â–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å, –Ω–æ –±–µ–∑ —Ñ–µ–π–∫–∞. –ù–∏–∫–∞–∫–∏—Ö —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ.\\n\\nüîπ **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî –ø–∏—à–∏ –∂–∏–≤—ã–º, —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–º —è–∑—ã–∫–æ–º. –ú–∞–∫—Å–∏–º—É–º 2‚Äì3 –∞–±–∑–∞—Ü–∞ –∏–ª–∏ 300 —Å–∏–º–≤–æ–ª–æ–≤. –ü–µ—Ä–µ–¥–∞–π —Å—É—Ç—å –≤–∏–¥–µ–æ, —É—Å–∏–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å, –¥–æ–±–∞–≤—å –ª—ë–≥–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä –∏–ª–∏ –≤–æ–ø—Ä–æ—Å. –ó–∞–≤–µ—Ä—à–∏ –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é (—Å–º–æ—Ç—Ä–∏, –ø–∏—à–∏, –¥–µ–ª–∞–π).\\n\\n–í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:\\n\\n–ó–∞–≥–æ–ª–æ–≤–æ–∫: [—Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞]\\n–û–ø–∏—Å–∞–Ω–∏–µ: [–∫—Ä–∞—Ç–∫–æ–µ, –≤–æ–≤–ª–µ–∫–∞—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]\"\n    }\n  ]\n}\n",
        "headerParametersJson": "{\n  \"Authorization\": \"Bearer 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\",\n  \"Content-Type\": \"application/json\"\n}\n"
      },
      "name": "GPT Generate",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -1860,
        -1920
      ],
      "id": "a9678e0a-a8a8-4c3a-8f9e-6c083b73377b"
    },
    {
      "parameters": {
        "functionCode": "const files = items; // –∫–∞–∂–¥—ã–π item ‚Äî —ç—Ç–æ —Ñ–∞–π–ª\nif (!files.length) {\n  throw new Error('–ù–µ—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞');\n}\n\nconst idx = Math.floor(Math.random() * files.length);\n\nreturn [\n  {\n    json: {\n      fileId: files[idx].json.id,\n      fileName: files[idx].json.name\n    }\n  }\n];\n"
      },
      "name": "Pick Random",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1320,
        -1920
      ],
      "id": "a0a4b09a-bb06-454a-90ab-de048971fcd2"
    },
    {
      "parameters": {
        "functionCode": "const content = items[0].json.choices?.[0]?.message?.content || '';\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π, –ø–æ—Å–ª–µ \"–ó–∞–≥–æ–ª–æ–≤–æ–∫:\")\nconst titleMatch = content.match(/–ó–∞–≥–æ–ª–æ–≤–æ–∫:\\s*[\"‚Äú]?(.+?)[\"‚Äù]?\\n/);\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ (–≤—Å—ë, —á—Ç–æ –ø–æ—Å–ª–µ \"–û–ø–∏—Å–∞–Ω–∏–µ:\")\nconst descriptionMatch = content.match(/–û–ø–∏—Å–∞–Ω–∏–µ:\\s*([\\s\\S]*)/);\n\n// –ß–∏—Å—Ç–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç\nconst title = titleMatch ? titleMatch[1].trim() : '';\nconst description = descriptionMatch ? descriptionMatch[1].trim() : '';\n\nreturn [\n  {\n    json: {\n      title,\n      description\n    }\n  }\n];\n"
      },
      "name": "Caption Source",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -1680,
        -1920
      ],
      "id": "d1ae5409-4c39-407a-a892-c4ac3d839c17"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "list",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "additionalOptions": {}
      },
      "name": "Check Duplicate",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -1940,
        -1440
      ],
      "id": "3dbfe726-a3a5-44f0-96b7-b254854efa79",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "append",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "addAllFields": false,
        "options": {}
      },
      "name": "Save Record",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -1700,
        -1440
      ],
      "id": "358bacf7-7d16-466d-a85f-914ea14549ee",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.autoposting.com/reels",
        "allowUnauthorizedCerts": true,
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"caption\": \"{{$node['Caption Source'].json['description']}}\",\n  \"file\": \"output.mp4\"\n}"
      },
      "name": "Publish Reel",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -1500,
        -1440
      ],
      "id": "3beffc3e-eec3-4376-8c24-97399ac11699"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "update",
        "application": "airtable",
        "table": "history",
        "options": {}
      },
      "name": "Update Status",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -1280,
        -1440
      ],
      "id": "f22cfd13-b42e-415b-b122-4c6ab28ada76",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "list",
        "useQueryString": true,
        "queryString": "'1mwCMPgw6NjfEl4IiRIb1gkdFCM42gBXi' in parents and mimeType != 'application/vnd.google-apps.folder'",
        "options": {}
      },
      "name": "Get Reels",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        -1500,
        -1920
      ],
      "id": "c952d5ca-5e8f-4eda-bd88-103e10cef1aa",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "75bcb72f-beba-47be-92e4-d334be1df56e",
              "name": "fileUrl",
              "value": "=https://drive.google.com/uc?export=download&id={{$node[\"Pick Random\"].json[\"fileId\"]}}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1140,
        -1920
      ],
      "id": "79eb6db3-8cac-4ecc-bc63-4325d01bd8d4",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.json2video.com/v2/movies",
        "jsonParameters": true,
        "options": {
          "bodyContentType": "json"
        },
        "bodyParametersJson": "={{\nJSON.stringify({\n  resolution: \"custom\",\n  width: 1080,\n  height: 1920,\n  draft: true,\n  scenes: [\n    {\n      elements: [\n        {\n          type: \"video\",\n          src: `https://drive.google.com/uc?export=download&id=${$node['Pick Random'].json['fileId']}`,\n          width: 1080,\n          height: 1200,\n          top: 360,\n          left: 0,\n          resize: \"cover\"\n        },\n        {\n          type: \"html\",\n          html: `<div style=\"width:100%;height:360px;background-color:black;display:flex;align-items:center;justify-content:center;font-size:38px;font-weight:bold;color:white;text-align:center;padding:0 40px;\">${$node['Caption Source'].json['title']}</div>`,\n          duration: 10\n        },\n        {\n          type: \"html\",\n          html: `<div style=\"width:100%;height:360px;background-color:black;\"></div>`,\n          position: \"absolute\",\n          bottom: 0,\n          left: 0,\n          duration: 10\n        }\n      ]\n    }\n  ]\n})\n}}\n",
        "headerParametersJson": "{\n  \"Content-Type\": \"application/json\",\n  \"x-api-key\": \"5QWRvH54aWMKmfeHGqoj0cLpukGYFbuNeKdFsTve\"\n}"
      },
      "id": "289f00be-6aa7-47d9-b4b8-32f5e65d336f",
      "name": "Create Video via json2video",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [
        -2080,
        -1680
      ]
    },
    {
      "parameters": {
        "content": "# 1. n8n.io\n# 2. airtable.com\n# 3. developers.facebook.com\n# 4. platform.openai.com\n# 5. console.cloud.google.com\n.\n# ID -\n# Secret - \n# Access Token -",
        "height": 640,
        "width": 660
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1760,
        -2640
      ],
      "typeVersion": 1,
      "id": "21c2467a-5cfd-4f0d-861b-4ad1b6150e5c",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "amount": 10,
        "unit": "seconds"
      },
      "name": "Wait Render",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [
        -1880,
        -1680
      ],
      "id": "fc8485a1-7287-489d-b0e6-580ed6bcd376",
      "webhookId": "25b2968f-29b8-47d4-8e3a-cb9a4c1a63de"
    },
    {
      "parameters": {
        "url": "https://api.json2video.com/v2/movies/{{$node[\"Create Video via json2video1\"].json[\"project\"]}}",
        "jsonParameters": true,
        "options": {},
        "headerParametersJson": "{\n  \"x-api-key\": \"5QWRvH54aWMKmfeHGqoj0cLpukGYFbuNeKdFsTve\"\n}"
      },
      "name": "Check Render Status",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -1680,
        -1680
      ],
      "id": "6ebb0235-b07c-4bd4-8318-95fddfbb1214"
    },
    {
      "parameters": {
        "url": "={{$node[\"Check Render Status\"].json[\"videoUrl\"]}}",
        "responseFormat": "file",
        "jsonParameters": true,
        "options": {}
      },
      "name": "Download Final Video",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -1480,
        -1680
      ],
      "id": "93b06228-0ca2-4598-852b-e915f71e1e91"
    }
  ],
  "pinData": {
    "Cron": [
      {
        "json": {}
      }
    ]
  },
  "connections": {
    "Upload Final Video1": {
      "main": [
        [
          {
            "node": "Prepare Airtable Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cron": {
      "main": [
        [
          {
            "node": "GPT Generate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT Generate": {
      "main": [
        [
          {
            "node": "Caption Source",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pick Random": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Caption Source": {
      "main": [
        [
          {
            "node": "Get Reels",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Duplicate": {
      "main": [
        [
          {
            "node": "Save Record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Record": {
      "main": [
        [
          {
            "node": "Publish Reel",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Publish Reel": {
      "main": [
        [
          {
            "node": "Update Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Reels": {
      "main": [
        [
          {
            "node": "Pick Random",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Create Video via json2video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Video via json2video": {
      "main": [
        [
          {
            "node": "Wait Render",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait Render": {
      "main": [
        [
          {
            "node": "Check Render Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Render Status": {
      "main": [
        [
          {
            "node": "Download Final Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Final Video": {
      "main": [
        [
          {
            "node": "Upload Final Video1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "42b89069-837e-44f6-b4ef-ba51dcea7a87",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "03802800ec9728491c300edb92e0138d87d9dcbbfccb74620634ca050fae6138"
  },
  "id": "NnoYOzymkfuqYt8O",
  "tags": []
}
