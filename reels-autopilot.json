{
  "name": "My workflow 6 copy",
  "nodes": [
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "custom",
              "cronExpression": "0 6 * * *"
            }
          ]
        }
      },
      "name": "Cron",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [
        -5540,
        -10660
      ],
      "id": "9f8a3949-198b-4f60-8337-c4f0325b13fa"
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"model\": \"gpt-3.5-turbo\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –∏ —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç Instagram Reels. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏—Ä—É—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–∑—É —Ü–µ–ø–ª—è—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∏ –¥–æ–Ω–æ—Å—è—Ç —Å—É—Ç—å.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"–°–æ–∑–¥–∞–π **–∑–∞–≥–æ–ª–æ–≤–æ–∫** –∏ **–∫—Ä–∞—Ç–∫–æ–µ, —Ü–µ–ø–ª—è—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** –¥–ª—è Instagram Reels –Ω–∞ —Ç–µ–º—É: [–£–ö–ê–ñ–ò –¢–ï–ú–£ –ó–î–ï–°–¨].\\n\\nüîπ **–ó–∞–≥–æ–ª–æ–≤–æ–∫** ‚Äî –æ–¥–Ω–æ —Ü–µ–ø–ª—è—é—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–µ, –∫–ª–∏–∫–±–µ–π—Ç–Ω–æ–µ, –≤—ã–∑—ã–≤–∞—é—â–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å, –Ω–æ –±–µ–∑ —Ñ–µ–π–∫–∞. –ù–∏–∫–∞–∫–∏—Ö —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ.\\n\\nüîπ **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî –ø–∏—à–∏ –∂–∏–≤—ã–º, —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–º —è–∑—ã–∫–æ–º. –ú–∞–∫—Å–∏–º—É–º 2‚Äì3 –∞–±–∑–∞—Ü–∞ –∏–ª–∏ 300 —Å–∏–º–≤–æ–ª–æ–≤. –ü–µ—Ä–µ–¥–∞–π —Å—É—Ç—å –≤–∏–¥–µ–æ, —É—Å–∏–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å, –¥–æ–±–∞–≤—å –ª—ë–≥–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä –∏–ª–∏ –≤–æ–ø—Ä–æ—Å. –ó–∞–≤–µ—Ä—à–∏ –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é (—Å–º–æ—Ç—Ä–∏, –ø–∏—à–∏, –¥–µ–ª–∞–π).\\n\\n–í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:\\n\\n–ó–∞–≥–æ–ª–æ–≤–æ–∫: [—Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞]\\n–û–ø–∏—Å–∞–Ω–∏–µ: [–∫—Ä–∞—Ç–∫–æ–µ, –≤–æ–≤–ª–µ–∫–∞—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]\"\n    }\n  ]\n}\n",
        "headerParametersJson": "{\n  \"Authorization\": \"Bearer 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\",\n  \"Content-Type\": \"application/json\"\n}\n"
      },
      "name": "GPT Generate",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -5340,
        -10660
      ],
      "id": "e988f658-3db2-4bc4-b169-2c9e8546a56e"
    },
    {
      "parameters": {
        "functionCode": "const files = items; // –∫–∞–∂–¥—ã–π item ‚Äî —ç—Ç–æ —Ñ–∞–π–ª\nif (!files.length) {\n  throw new Error('–ù–µ—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞');\n}\n\nconst idx = Math.floor(Math.random() * files.length);\n\nreturn [\n  {\n    json: {\n      fileId: files[idx].json.id,\n      fileName: files[idx].json.name\n    }\n  }\n];\n"
      },
      "name": "Pick Random",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -4800,
        -10660
      ],
      "id": "102d4186-b1e6-4a1a-bf00-3098fdc79ba1"
    },
    {
      "parameters": {
        "functionCode": "const content = items[0].json.choices?.[0]?.message?.content || '';\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π, –ø–æ—Å–ª–µ \"–ó–∞–≥–æ–ª–æ–≤–æ–∫:\")\nconst titleMatch = content.match(/–ó–∞–≥–æ–ª–æ–≤–æ–∫:\\s*[\"‚Äú]?(.+?)[\"‚Äù]?\\n/);\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ (–≤—Å—ë, —á—Ç–æ –ø–æ—Å–ª–µ \"–û–ø–∏—Å–∞–Ω–∏–µ:\")\nconst descriptionMatch = content.match(/–û–ø–∏—Å–∞–Ω–∏–µ:\\s*([\\s\\S]*)/);\n\n// –ß–∏—Å—Ç–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç\nconst title = titleMatch ? titleMatch[1].trim() : '';\nconst description = descriptionMatch ? descriptionMatch[1].trim() : '';\n\nreturn [\n  {\n    json: {\n      title,\n      description\n    }\n  }\n];\n"
      },
      "name": "Caption Source",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -5160,
        -10660
      ],
      "id": "58738f3b-4908-4986-9064-2dee1f767be7"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "list",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "additionalOptions": {}
      },
      "name": "Check Duplicate",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -5420,
        -10180
      ],
      "id": "d6c41090-326a-4813-a5a8-b25f855639f1",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "append",
        "application": {
          "__rl": true,
          "value": "appvifz0ot1GllmI6",
          "mode": "id"
        },
        "table": {
          "__rl": true,
          "value": "tblOnteWFMxZZqK8m",
          "mode": "id"
        },
        "addAllFields": false,
        "options": {}
      },
      "name": "Save Record",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -5180,
        -10180
      ],
      "id": "f25c5e8b-a836-4578-9ef0-6506ed7d4338",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      }
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.autoposting.com/reels",
        "allowUnauthorizedCerts": true,
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "{\n  \"caption\": \"{{$node['Caption Source'].json['description']}}\",\n  \"file\": \"output.mp4\"\n}"
      },
      "name": "Publish Reel",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -4960,
        -10180
      ],
      "id": "3293dbe9-2a76-40f1-9c3f-258934815221"
    },
    {
      "parameters": {
        "authentication": "airtableTokenApi",
        "operation": "update",
        "application": "airtable",
        "table": "history",
        "options": {}
      },
      "name": "Update Status",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 1,
      "position": [
        -4760,
        -10180
      ],
      "id": "aecc44ce-baf8-438b-95b1-908a858d15f8",
      "credentials": {
        "airtableTokenApi": {
          "id": "j0A9W6lTtOFzjTdr",
          "name": "Reels –ó–∞–≤–æ–¥"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "list",
        "useQueryString": true,
        "queryString": "'1mwCMPgw6NjfEl4IiRIb1gkdFCM42gBXi' in parents and mimeType != 'application/vnd.google-apps.folder'",
        "options": {}
      },
      "name": "Get Reels",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [
        -4980,
        -10660
      ],
      "id": "8d6cd0e3-9664-4aeb-a567-f894d2b2f8a4",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "content": "# 1. n8n.io\n# 2. airtable.com\n# 3. developers.facebook.com\n# 4. platform.openai.com\n# 5. console.cloud.google.com\n.\n# ID -\n# Secret - \n# Access Token - EAAKp3yN0oqIBO72LfFPVfRgs6N4jWuO2Ph3GxtkBuo1O4PILEhnZBdgdRX1hxZA7ZBr9c2PQmeJkb7ZCKrkZBLgRkszNLWXTMZCzW2c52UuLXit6ZBQK2vXQ99C3H4tCNSuYAGYCpL4z1VrrgVcYtmVAfhPOF47YvZCZCkOgxmMQl9a0ivOzywiMFNKXWMX3azAQeWhxBFxYqtzcbZBQZBU7VrFhf2GJkUZBEZCp99dGrFEYjINsLLLJFxwZDZD",
        "height": 960,
        "width": 640
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3880,
        -11480
      ],
      "typeVersion": 1,
      "id": "dec614b1-bc8c-49c8-aab7-f85e662b618e",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "requestMethod": "POST",
        "url": "https://api.json2video.com/v2/movies",
        "responseFormat": "file",
        "jsonParameters": true,
        "options": {},
        "sendBinaryData": "=false",
        "bodyParametersJson": "==JSON.stringify({\n  comment: \"–¢–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ\",\n  resolution: \"full-hd\",\n  draft: true,\n  scenes: [\n    {\n      elements: [\n        {\n          type: \"video\",\n          src: $node[\"Pick Random\"].json[\"fileUrl\"],\n          duration: 5\n        },\n        {\n          type: \"text\",\n          text: $node[\"Caption Source\"].json[\"title\"],\n          style: \"005\",\n          duration: 5\n        }\n      ]\n    }\n  ]\n})\n",
        "headerParametersJson": "{\n  \"Content-Type\": \"application/json\",\n  \"x-api-key\": \"5QWRvH54aWMKmfeHGqoj0cLpukGYFbuNeKdFsTve\"\n}"
      },
      "id": "a3f63871-1bf7-4330-9aba-f7deda613d60",
      "name": "Create Video via json2video1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 2,
      "position": [
        -5540,
        -10420
      ]
    },
    {
      "parameters": {
        "amount": 10,
        "unit": "seconds"
      },
      "name": "Wait Render1",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1,
      "position": [
        -5360,
        -10420
      ],
      "id": "502d8891-64fa-4c50-a197-db1c4bda16ba",
      "webhookId": "25b2968f-29b8-47d4-8e3a-cb9a4c1a63de"
    },
    {
      "parameters": {
        "url": "https://api.json2video.com/v2/movies/{{$node[\"Create Video via json2video\"].json[\"projectId\"]}}",
        "jsonParameters": true,
        "options": {},
        "headerParametersJson": "{\n  \"x-api-key\": \"5QWRvH54aWMKmfeHGqoj0cLpukGYFbuNeKdFsTve\"\n}"
      },
      "name": "Check Render Status1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -5160,
        -10420
      ],
      "id": "3d723517-9a69-4c97-a3f0-3f93b89063c0"
    },
    {
      "parameters": {
        "url": "={{$node[\"Check Render Status1\"].json[\"videoUrl\"]}}",
        "responseFormat": "file",
        "jsonParameters": true,
        "options": {}
      },
      "name": "Download Final Video1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        -4960,
        -10420
      ],
      "id": "cb8e441c-aaaa-4219-b516-6155ee5a58d2"
    },
    {
      "parameters": {
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "mode": "list",
          "value": "root",
          "cachedResultName": "/ (Root folder)"
        },
        "options": {}
      },
      "name": "Upload Final Video1",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -4760,
        -10420
      ],
      "id": "93d03af2-ef60-46d0-9467-517e42672310",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Vt1qBhoNFddDaUnc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "return [{json:{videoUrl:$node[\"Upload Final Video\"].json.webViewLink,description:$node[\"Caption Source2\"].json.description}}];"
      },
      "name": "Prepare Airtable Fields1",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -4560,
        -10420
      ],
      "id": "dca39f41-3639-4c7d-b6c4-793c89583253"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "75bcb72f-beba-47be-92e4-d334be1df56e",
              "name": "fileUrl",
              "value": "=https://drive.google.com/uc?export=download&id={{$node[\"Pick Random\"].json[\"fileId\"]}}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -4620,
        -10660
      ],
      "id": "d5a6d3f3-f89d-4e68-9d91-9435906de77d",
      "name": "Edit Fields"
    }
  ],
  "pinData": {},
  "connections": {
    "Cron": {
      "main": [
        [
          {
            "node": "GPT Generate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT Generate": {
      "main": [
        [
          {
            "node": "Caption Source",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pick Random": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Caption Source": {
      "main": [
        [
          {
            "node": "Get Reels",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Duplicate": {
      "main": [
        [
          {
            "node": "Save Record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Record": {
      "main": [
        [
          {
            "node": "Publish Reel",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Publish Reel": {
      "main": [
        [
          {
            "node": "Update Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Reels": {
      "main": [
        [
          {
            "node": "Pick Random",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Video via json2video1": {
      "main": [
        [
          {
            "node": "Wait Render1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait Render1": {
      "main": [
        [
          {
            "node": "Check Render Status1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Render Status1": {
      "main": [
        [
          {
            "node": "Download Final Video1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Final Video1": {
      "main": [
        [
          {
            "node": "Upload Final Video1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Final Video1": {
      "main": [
        [
          {
            "node": "Prepare Airtable Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Create Video via json2video1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c6d22496-84ce-4c60-82dc-6ba60f366d1b",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "03802800ec9728491c300edb92e0138d87d9dcbbfccb74620634ca050fae6138"
  },
  "id": "NnoYOzymkfuqYt8O",
  "tags": []
}
